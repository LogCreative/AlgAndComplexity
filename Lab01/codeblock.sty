\usepackage[outputdir=.texpadtmp]{minted}
\usepackage{tcolorbox}
\tcbuselibrary{minted}
\tcbuselibrary{skins}
\tcbuselibrary{documentation}
\definecolor{Z99}{HTML}{ffffff}
\definecolor{Z0}{HTML}{000000}
\definecolor{Z1}{HTML}{333333}
\definecolor{Z2}{HTML}{666666}
\definecolor{Z3}{HTML}{999999}
\definecolor{Z4}{HTML}{f7f7f7}
\definecolor{colMintedBg}{HTML}{FFFFFF}
\definecolor{colMintedRule}{HTML}{E0E4E5}
\definecolor{colMintedGutter}{HTML}{F2F2F2}
\definecolor{colMintedLinenos}{HTML}{999999}
\definecolor{colMintedLiteralBg}{HTML}{F8F8F8}
\definecolor{colMintedLiteralRule}{HTML}{E0E4E5}
\definecolor{colFnameFrame}{HTML}{E0E4E5}

\renewcommand{\theFancyVerbLine}{\ttfamily
\textcolor[rgb]{0.5,0.5,1.0}{\tiny
\oldstylenums{\arabic{FancyVerbLine}}}}

% \usepackage{listings}
% \definecolor{grey}{rgb}{0.8,0.8,0.8}
% \definecolor{darkgreen}{rgb}{0,0.3,0}
% \definecolor{darkblue}{rgb}{0,0,0.3}
% \def\lstbasicfont{\fontfamily{pcr}\selectfont\footnotesize}
% \lstset{%
%     numbers=left, %
%     numberstyle=\tiny\color{grey},
%     showstringspaces=false,
%     showspaces=false,%
%     tabsize=4,%
%     frame=lines,%
%     basicstyle={\footnotesize\lstbasicfont},%
%     keywordstyle=\color{darkblue}\bfseries,%
%     identifierstyle=,%
%     commentstyle=\color{darkgreen},%\itshape,%
%     stringstyle=\color{black},%
%     breaklines,
% }

\setminted{
	breaklines,autogobble,linenos,numbersep=1mm,frame=lines,framesep=2mm,fontsize=\scriptsize,
}

\newtcbox{\fname}[1][]{
	on line,
	fontupper=\ttfamily,
	arc=0pt,
	outer arc=0pt,
	boxsep=0pt,
	before upper={\rule[-3pt]{0pt}{10pt}},
	left=4pt,right=4pt,top=2pt,bottom=2pt,
	boxrule=0.7pt,
	colback=Z99,
	colframe=colFnameFrame,
	coltext=Z0,
}


% Code Block
\newtcblisting[auto counter,number format=\arabic,
list inside=code]{code}[1]{
	fontupper=\tt,
	% listing engine=minted,
	listing only,
	colback=colMintedBg,
	colframe=colMintedRule,
	arc=0pt,outer arc=0pt,boxsep=0pt,boxrule=0.5pt,
	left=30pt,right=10pt,top=10pt,bottom=10pt,
	minted language=#1,
    % listing file=#2,
	minted options={breaklines,autogobble,linenos,numbersep=3mm},
    % listing options = {language = #1,breaklines,linenos,numbersep=3mm},
	enhanced,
	overlay={
	\begin{tcbclipinterior}
		\fill[colMintedGutter] (frame.south west) rectangle ([xshift=30pt]frame.north west);
	\end{tcbclipinterior}
	},
}

\newtcblisting[auto counter,number format=\arabic]{lazycode}[3][]{
	fontupper=\tt,
	listing engine=minted,
	listing only,
    listing file=#3,
	colback=colMintedBg,
	colframe=colMintedRule,
	arc=0pt,outer arc=0pt,boxsep=0pt,boxrule=0.5pt,
	left=30pt,right=10pt,top=10pt,bottom=10pt,
	title=Code \thetcbcounter: #1,
	attach boxed title to bottom center,
	colbacktitle=Z99,coltitle=Z0,
	boxed title style={colframe=Z99},
	minted language=#2,
	minted options={breaklines,autogobble,linenos,numbersep=3mm},
	enhanced,overlay={
	\begin{tcbclipinterior}
		\fill[colMintedGutter] (frame.south west) rectangle ([xshift=30pt]frame.north west);
	\end{tcbclipinterior}
	},
}